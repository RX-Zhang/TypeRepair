--- 
+++ 
@@ -37,7 +37,7 @@
                     if (escapeMode != EscapeMode.xhtml)
                         accum.append("&nbsp;");
                     else
-                        accum.append(c);
+                        accum.append("&#xa0;"); // escape non-breaking space in xhtml mode as numeric entity
                     break;
                 case '<':
                     if (!inAttribute)
@@ -74,3 +74,4 @@
         }
     }
 }
+
