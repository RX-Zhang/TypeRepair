--- 
+++ 
@@ -2,6 +2,7 @@
                              String encoding,
                              boolean useUnicodeExtraFields,
                              boolean allowStoredEntriesWithDataDescriptor) {
+    buf = ByteBuffer.allocate(ZipArchiveOutputStream.BUFFER_SIZE);
     zipEncoding = ZipEncodingHelper.getZipEncoding(encoding);
     this.useUnicodeExtraFields = useUnicodeExtraFields;
     in = new PushbackInputStream(inputStream, buf.capacity());
@@ -9,3 +10,4 @@
         allowStoredEntriesWithDataDescriptor;
     // haven't read anything so far
 }
+
