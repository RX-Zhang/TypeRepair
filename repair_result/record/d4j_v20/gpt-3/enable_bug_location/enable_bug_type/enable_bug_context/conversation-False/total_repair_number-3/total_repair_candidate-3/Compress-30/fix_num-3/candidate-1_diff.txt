--- 
+++ 
@@ -14,6 +14,11 @@
         throw new IOException("stream closed");
     }
 
+    // If len is zero, we should return 0 instead of -1
+    if (len == 0) {
+        return 0;
+    }
+
     final int hi = offs + len;
     int destOffs = offs;
     int b;
@@ -25,3 +30,4 @@
     int c = (destOffs == offs) ? -1 : (destOffs - offs);
     return c;
 }
+
