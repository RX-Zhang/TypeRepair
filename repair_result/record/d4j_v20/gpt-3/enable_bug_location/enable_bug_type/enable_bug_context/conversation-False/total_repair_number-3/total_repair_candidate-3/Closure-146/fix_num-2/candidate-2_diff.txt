--- 
+++ 
@@ -1,7 +1,7 @@
 public TypePair getTypesUnderInequality(JSType that) {
-  // unions types
+  // union types
   if (that instanceof UnionType) {
-    TypePair p = that.getTypesUnderInequality(this);
+    TypePair p = ((UnionType) that).getTypesUnderInequality(this);
     return new TypePair(p.typeB, p.typeA);
   }
 
@@ -13,8 +13,10 @@
     case FALSE:
     case UNKNOWN:
       return new TypePair(this, that);
+
+    default:
+      // Defensive default case to handle null or unexpected results from testForEquality
+      throw new IllegalStateException("Unexpected testForEquality result: " + this.testForEquality(that));
   }
+}
 
-  // switch case is exhaustive
-  throw new IllegalStateException();
-}
