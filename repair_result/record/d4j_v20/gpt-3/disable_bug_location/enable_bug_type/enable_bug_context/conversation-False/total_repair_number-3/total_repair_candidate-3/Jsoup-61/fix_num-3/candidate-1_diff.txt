--- 
+++ 
@@ -1,9 +1,13 @@
 public boolean hasClass(String className) {
     final String classAttr = attributes.get("class");
+    if (classAttr == null || classAttr.length() == 0 || className.length() == 0) {
+        return false;
+    }
+
     final int len = classAttr.length();
     final int wantLen = className.length();
 
-    if (len == 0 || len < wantLen) {
+    if (len < wantLen) {
         return false;
     }
 
@@ -40,3 +44,4 @@
 
     return false;
 }
+
