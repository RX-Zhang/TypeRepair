--- 
+++ 
@@ -3,11 +3,13 @@
     int          end = offset + length;
 
     for (int i = offset; i < end; ++i) {
-        if (buffer[i] == 0) {
+        int b = buffer[i] & 0xff;
+        if (b == 0) {
             break;
         }
-        result.append((char) buffer[i]);
+        result.append((char) b);
     }
 
     return result.toString();
 }
+
