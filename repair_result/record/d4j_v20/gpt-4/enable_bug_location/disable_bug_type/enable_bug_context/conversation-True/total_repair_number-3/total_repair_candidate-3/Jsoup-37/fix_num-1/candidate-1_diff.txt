--- 
+++ 
@@ -1,5 +1,9 @@
 public String html() {
     StringBuilder accum = new StringBuilder();
-    html(accum);
-    return accum.toString().trim();
+    if (preserveWhitespace(this))
+        html(accum);
+    else
+        html(accum);
+    return accum.toString();
 }
+
