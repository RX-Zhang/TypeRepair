--- 
+++ 
@@ -1,3 +1,11 @@
 public int getLength() {
-    return ValueUtils.getLength(getBaseValue());
+    Object base = getBaseValue();
+    if (base == null) {
+        return 0;
+    }
+    if (base instanceof Map) {
+        return ((Map<?, ?>) base).size();
+    }
+    return ValueUtils.getLength(base);
 }
+
