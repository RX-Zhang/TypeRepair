--- 
+++ 
@@ -3,9 +3,9 @@
     final char mappedChar = this.map(str.charAt(index));
     // HW rule check
     if (index > 1 && mappedChar != '0') {
-        final char hwChar = str.charAt(index - 1);
+        final char hwChar = Character.toUpperCase(str.charAt(index - 1));
         if ('H' == hwChar || 'W' == hwChar) {
-            final char preHWChar = str.charAt(index - 2);
+            final char preHWChar = Character.toUpperCase(str.charAt(index - 2));
             final char firstCode = this.map(preHWChar);
             if (firstCode == mappedChar || 'H' == preHWChar || 'W' == preHWChar) {
                 return 0;
@@ -14,3 +14,4 @@
     }
     return mappedChar;
 }
+
