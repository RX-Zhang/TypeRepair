--- 
+++ 
@@ -29,11 +29,17 @@
     if (var != null) {
       Scope ownerScope = var.getScope();
       if (ownerScope.isLocal()) {
-        data.get(ownerScope.getRootNode()).recordAssignedName(name);
+        AstFunctionContents contents = getFunctionAnalysisResults(ownerScope.getRootNode());
+        if (contents != null) {
+          contents.recordAssignedName(name);
+        }
       }
 
       if (scope != ownerScope && ownerScope.isLocal()) {
-        data.get(ownerScope.getRootNode()).recordEscapedVarName(name);
+        AstFunctionContents contents = getFunctionAnalysisResults(ownerScope.getRootNode());
+        if (contents != null) {
+          contents.recordEscapedVarName(name);
+        }
       }
     }
   } else if (n.isGetProp() && n.isUnscopedQualifiedName() &&
@@ -44,9 +50,12 @@
     if (var != null) {
       Scope ownerScope = var.getScope();
       if (scope != ownerScope && ownerScope.isLocal()) {
-        data.get(ownerScope.getRootNode())
-            .recordEscapedQualifiedName(n.getQualifiedName());
+        AstFunctionContents contents = getFunctionAnalysisResults(ownerScope.getRootNode());
+        if (contents != null) {
+          contents.recordEscapedQualifiedName(n.getQualifiedName());
+        }
       }
     }
   }
 }
+
