--- 
+++ 
@@ -4,8 +4,8 @@
                              boolean allowStoredEntriesWithDataDescriptor) {
     zipEncoding = ZipEncodingHelper.getZipEncoding(encoding);
     this.useUnicodeExtraFields = useUnicodeExtraFields;
-    in = new PushbackInputStream(inputStream, buf.capacity());
-    this.allowStoredEntriesWithDataDescriptor =
-        allowStoredEntriesWithDataDescriptor;
-    // haven't read anything so far
+    this.allowStoredEntriesWithDataDescriptor = allowStoredEntriesWithDataDescriptor;
+    // Use a PushbackInputStream with an appropriate buffer size (BUFFER_SIZE)
+    in = new PushbackInputStream(inputStream, ZipArchiveOutputStream.BUFFER_SIZE);
 }
+
