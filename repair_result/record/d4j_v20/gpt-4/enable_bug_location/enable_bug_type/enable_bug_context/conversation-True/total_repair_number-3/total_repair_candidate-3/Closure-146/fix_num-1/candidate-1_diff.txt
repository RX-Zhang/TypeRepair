--- 
+++ 
@@ -1,8 +1,18 @@
 public TypePair getTypesUnderInequality(JSType that) {
-  // unions types
-  if (that instanceof UnionType) {
+  // union types
+  if (that.isUnionType()) {
     TypePair p = that.getTypesUnderInequality(this);
     return new TypePair(p.typeB, p.typeA);
+  }
+
+  // Handle void and unknown types specially to fix the bug
+  if (this.isVoidType() && that.isVoidType()) {
+    return new TypePair(null, null);
+  }
+
+  if (this.isUnknownType() || that.isUnknownType()) {
+    return new TypePair(this.isUnknownType() ? this : null,
+                        that.isUnknownType() ? that : null);
   }
 
   // other types
@@ -18,3 +28,4 @@
   // switch case is exhaustive
   throw new IllegalStateException();
 }
+
