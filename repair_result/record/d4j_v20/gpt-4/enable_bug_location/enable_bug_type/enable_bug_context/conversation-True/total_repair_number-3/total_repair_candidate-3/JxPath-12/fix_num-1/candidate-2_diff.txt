--- 
+++ 
@@ -11,7 +11,7 @@
         QName testName = nodeNameTest.getNodeName();
         String namespaceURI = nodeNameTest.getNamespaceURI();
         boolean wildcard = nodeNameTest.isWildcard();
-        String testPrefix = testName.getPrefix();
+        String testPrefix = DOMNodePointer.getPrefix(node);  // Fixed: getPrefix from node, not testName
         if (wildcard && testPrefix == null) {
             return true;
         }
@@ -19,7 +19,7 @@
             || testName.getName()
                     .equals(DOMNodePointer.getLocalName(node))) {
             String nodeNS = DOMNodePointer.getNamespaceURI(node);
-            return equalStrings(namespaceURI, nodeNS);
+            return DOMNodePointer.equalStrings(namespaceURI, nodeNS); // Fixed: use DOMNodePointer.equalStrings
         }
         return false;
     }
@@ -48,3 +48,4 @@
     }
     return false;
 }
+
