--- 
+++ 
@@ -7,7 +7,7 @@
 
   // Prototypes of constructors and interfaces are always declared.
   if (qName != null && qName.endsWith(".prototype")) {
-      return false;
+    return false;
   }
 
   boolean inferred = true;
@@ -37,8 +37,7 @@
 
       // Check if this is assigned in an inner scope.
       // Functions assigned in inner scopes are inferred.
-      AstFunctionContents contents =
-          getFunctionAnalysisResults(scope.getRootNode());
+      AstFunctionContents contents = getFunctionAnalysisResults(n);
       if (contents == null ||
           !contents.getEscapedQualifiedNames().contains(qName)) {
         return false;
@@ -47,3 +46,4 @@
   }
   return inferred;
 }
+
