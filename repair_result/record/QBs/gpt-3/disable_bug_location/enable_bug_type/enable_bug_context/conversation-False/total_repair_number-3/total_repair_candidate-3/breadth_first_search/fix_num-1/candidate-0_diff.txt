--- 
+++ 
@@ -4,12 +4,13 @@
     queue.append(startnode)
     nodesseen = set()
     nodesseen.add(startnode)
-    while True:
+    while queue:
         node = queue.popleft()
         if node is goalnode:
             return True
         else:
-            queue.extend(node for node in node.successors if node not in nodesseen)
-            nodesseen.update(node.successors)
+            new_successors = [n for n in node.successors if n not in nodesseen]
+            queue.extend(new_successors)
+            nodesseen.update(new_successors)
     return False
 
