--- 
+++ 
@@ -4,12 +4,15 @@
     queue.append(startnode)
     nodesseen = set()
     nodesseen.add(startnode)
-    while True:
+    while queue:
         node = queue.popleft()
         if node is goalnode:
             return True
         else:
-            queue.extend(node for node in node.successors if node not in nodesseen)
-            nodesseen.update(node.successors)
+            # Add only unseen successors to the queue and mark them seen
+            for successor in node.successors:
+                if successor not in nodesseen:
+                    queue.append(successor)
+                    nodesseen.add(successor)
     return False
 
