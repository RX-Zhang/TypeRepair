--- 
+++ 
@@ -4,12 +4,13 @@
     queue.append(startnode)
     nodesseen = set()
     nodesseen.add(startnode)
-    while True:
+    while queue:
         node = queue.popleft()
         if node is goalnode:
             return True
-        else:
-            queue.extend(node for node in node.successors if node not in nodesseen)
-            nodesseen.update(node.successors)
+        for successor in node.successors:
+            if successor not in nodesseen:
+                queue.append(successor)
+                nodesseen.add(successor)
     return False
 
