--- 
+++ 
@@ -4,12 +4,14 @@
     queue.append(startnode)
     nodesseen = set()
     nodesseen.add(startnode)
-    while True:
+    while queue:
         node = queue.popleft()
         if node is goalnode:
             return True
         else:
-            queue.extend(node for node in node.successors if node not in nodesseen)
-            nodesseen.update(node.successors)
+            for succ in node.successors:
+                if succ not in nodesseen:
+                    queue.append(succ)
+                    nodesseen.add(succ)
     return False
 
