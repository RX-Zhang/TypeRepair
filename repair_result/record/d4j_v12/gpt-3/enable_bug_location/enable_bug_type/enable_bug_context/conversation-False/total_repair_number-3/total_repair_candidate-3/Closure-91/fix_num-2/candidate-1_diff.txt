--- 
+++ 
@@ -18,7 +18,7 @@
     // function a() {} // or
     // a.x = function() {}; // or
     // var a = {x: function() {}};
-    int pType = parent.getType();
+    int pType = parent != null ? parent.getType() : -1; // Added null check for parent
     if (!(pType == Token.BLOCK ||
           pType == Token.SCRIPT ||
           pType == Token.NAME ||
@@ -63,3 +63,4 @@
 
   return true;
 }
+
