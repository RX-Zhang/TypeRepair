--- 
+++ 
@@ -3,7 +3,7 @@
         return null;
     }
     int len = str.length();
-    if (len != 2 && len != 5 && len < 7) {
+    if (len < 2) {
         throw new IllegalArgumentException("Invalid locale format: " + str);
     }
     char ch0 = str.charAt(0);
@@ -13,7 +13,7 @@
     }
     if (len == 2) {
         return new Locale(str, "");
-    } else {
+    } else if (len == 5) {
         if (str.charAt(2) != '_') {
             throw new IllegalArgumentException("Invalid locale format: " + str);
         }
@@ -22,13 +22,28 @@
         if (ch3 < 'A' || ch3 > 'Z' || ch4 < 'A' || ch4 > 'Z') {
             throw new IllegalArgumentException("Invalid locale format: " + str);
         }
-        if (len == 5) {
-            return new Locale(str.substring(0, 2), str.substring(3, 5));
+        return new Locale(str.substring(0, 2), str.substring(3, 5));
+    } else if (len >= 7) {
+        if (str.charAt(2) != '_') {
+            throw new IllegalArgumentException("Invalid locale format: " + str);
+        }
+        // Handle language + "_" + variant (e.g. "fr__POSIX")
+        if (str.charAt(3) == '_') {
+            // language + "" + variant
+            return new Locale(str.substring(0, 2), "", str.substring(4));
         } else {
+            char ch3 = str.charAt(3);
+            char ch4 = str.charAt(4);
+            if (ch3 < 'A' || ch3 > 'Z' || ch4 < 'A' || ch4 > 'Z') {
+                throw new IllegalArgumentException("Invalid locale format: " + str);
+            }
             if (str.charAt(5) != '_') {
                 throw new IllegalArgumentException("Invalid locale format: " + str);
             }
             return new Locale(str.substring(0, 2), str.substring(3, 5), str.substring(6));
         }
+    } else {
+        throw new IllegalArgumentException("Invalid locale format: " + str);
     }
 }
+
