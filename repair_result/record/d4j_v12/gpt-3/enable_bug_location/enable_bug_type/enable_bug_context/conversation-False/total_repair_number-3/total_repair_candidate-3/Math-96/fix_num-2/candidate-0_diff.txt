--- 
+++ 
@@ -8,10 +8,11 @@
     } else  {
         try {
             Complex rhs = (Complex)other;
-            if (rhs.isNaN()) {
-                ret = this.isNaN();
+            if (this.isNaN() || rhs.isNaN()) {
+                ret = this.isNaN() && rhs.isNaN();
             } else {
-                ret = (Double.doubleToRawLongBits(real) == Double.doubleToRawLongBits(rhs.getReal())) && (Double.doubleToRawLongBits(imaginary) == Double.doubleToRawLongBits(rhs.getImaginary())); 
+                ret = (Double.doubleToRawLongBits(real) == Double.doubleToRawLongBits(rhs.getReal())) 
+                      && (Double.doubleToRawLongBits(imaginary) == Double.doubleToRawLongBits(rhs.getImaginary())); 
             }
         } catch (ClassCastException ex) {
             // ignore exception
@@ -21,3 +22,4 @@
   
     return ret;
 }
+
