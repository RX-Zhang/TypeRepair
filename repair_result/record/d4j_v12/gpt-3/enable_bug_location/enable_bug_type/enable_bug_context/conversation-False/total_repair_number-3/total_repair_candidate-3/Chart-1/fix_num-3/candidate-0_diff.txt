--- 
+++ 
@@ -5,7 +5,7 @@
     }
     int index = this.plot.getIndexOf(this);
     CategoryDataset dataset = this.plot.getDataset(index);
-    if (dataset != null) {
+    if (dataset == null) { // Corrected logical error: should return if dataset is null
         return result;
     }
     int seriesCount = dataset.getRowCount();
@@ -18,8 +18,7 @@
                 }
             }
         }
-    }
-    else {
+    } else {
         for (int i = seriesCount - 1; i >= 0; i--) {
             if (isSeriesVisibleInLegend(i)) {
                 LegendItem item = getLegendItem(index, i);
@@ -31,3 +30,4 @@
     }
     return result;
 }
+
