--- 
+++ 
@@ -49,10 +49,10 @@
         // Add it after the parent namespace.
         ProvidedName parentName =
             providedNames.get(namespace.substring(0, indexOfDot));
-        Preconditions.checkNotNull(parentName);
-        Preconditions.checkNotNull(parentName.replacementNode);
-        parentName.replacementNode.getParent().addChildAfter(
-            replacementNode, parentName.replacementNode);
+        if (parentName != null && parentName.replacementNode != null) {
+          parentName.replacementNode.getParent().addChildAfter(
+              replacementNode, parentName.replacementNode);
+        }
       }
     }
     if (explicitNode != null) {
@@ -61,3 +61,4 @@
     compiler.reportCodeChange();
   }
 }
+
