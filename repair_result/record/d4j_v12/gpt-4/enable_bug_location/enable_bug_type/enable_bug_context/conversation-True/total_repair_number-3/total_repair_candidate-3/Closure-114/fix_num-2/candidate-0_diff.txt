--- 
+++ 
@@ -19,13 +19,22 @@
         recordDepScope(nameNode, ns);
       }
     } else {
+      List<NameInformation> scopesList = getDependencyScope(recordNode);
+      boolean rhsIsCaller = false;
+      if (!scopesList.isEmpty()) {
+        for (NameInformation dep : scopesList) {
+          if (dep.equals(ns)) {
+            rhsIsCaller = true;
+            break;
+          }
+        }
+      }
       // The rhs of the assignment is the caller, so it's used by the
       // context. Don't associate it w/ the lhs.
-      // FYI: this fixes only the specific case where the assignment is the
-      // caller expression, but it could be nested deeper in the caller and
-      // we would still get a bug.
-      // See testAssignWithCall2 for an example of this.
-      recordDepScope(recordNode, ns);
+      if (!rhsIsCaller) {
+        recordDepScope(recordNode, ns);
+      }
     }
   }
 }
+
