--- 
+++ 
@@ -10,6 +10,12 @@
   Map<TemplateType, JSType> inferred = 
       inferTemplateTypesFromParameters(fnType, n);
 
+  // If any template type could not be inferred, replace with UNKNOWN.
+  for (TemplateType key : keys) {
+    if (!inferred.containsKey(key)) {
+      inferred.put(key, registry.getNativeType(JSTypeNative.UNKNOWN_TYPE));
+    }
+  }
 
   // Replace all template types. If we couldn't find a replacement, we
   // replace it with UNKNOWN.
@@ -26,3 +32,4 @@
 
   return replacer.madeChanges;
 }
+
