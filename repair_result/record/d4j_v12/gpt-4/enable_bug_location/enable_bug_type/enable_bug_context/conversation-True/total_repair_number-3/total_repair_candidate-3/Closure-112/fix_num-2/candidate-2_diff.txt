--- 
+++ 
@@ -10,9 +10,15 @@
   Map<TemplateType, JSType> inferred = 
       inferTemplateTypesFromParameters(fnType, n);
 
+  // Ensure all template keys have an inferred type; if not, assign UNKNOWN
+  for (TemplateType key : keys) {
+    if (!inferred.containsKey(key)) {
+      inferred.put(key, registry.getNativeType(JSTypeNative.UNKNOWN_TYPE));
+    }
+  }
 
-  // Replace all template types. If we couldn't find a replacement, we
-  // replace it with UNKNOWN.
+
+  // Replace all template types using the inferred map
   TemplateTypeReplacer replacer = new TemplateTypeReplacer(
       registry, inferred);
   Node callTarget = n.getFirstChild();
@@ -26,3 +32,4 @@
 
   return replacer.madeChanges;
 }
+
